<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding favicon -->
    

    <!-- Adding meta -->
    
    
    <meta name="author" content="Glenn de Haan" />
    
    <meta name="description" content="Base web framework based on the popular ExpressJS package" />
    
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      Home
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">@neobeach/core</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><ul><li class="menu-li"><a href='https://github.com/neobeach/core' class=' menu-link' id='' target='_blank'>@neobeach/core - GitHub</a></li><li class="menu-li"><a href='https://npmjs.com/@neobeach/core' class=' menu-link' id='' target='_blank'>@neobeach/core - NPM</a></li><li class="menu-li"><a href='https://neobeach.dev/core/' class=' menu-link' id='' target=''>Core - Documentation</a></li><li class="menu-li"><a href='https://neobeach.dev/middlewares/' class=' menu-link' id='' target=''>Middlewares - Documentation</a></li><li class="menu-li"><a href='https://neobeach.dev/modules/' class=' menu-link' id='' target=''>Modules - Documentation</a></li></ul><div class="accordion collapsed" id="7370081" > <h3 class="accordion-heading">Modules<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="module-Config.html">Config</a></li><li class="accordion-list" id=""><a href="module-Logger.html">Logger</a></li><li class="accordion-list" id=""><a href="module-Runtime.html">Runtime</a></li></ul> </div><div class="accordion collapsed" id="1838827" > <h3 class="accordion-heading">Classes<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id=8022689><div class="accordion-heading child"><a href="Controller.html">Controller</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="Controller.html#copy">copy</a></li><li data-type='method'><a href="Controller.html#delete">delete</a></li><li data-type='method'><a href="Controller.html#get">get</a></li><li data-type='method'><a href="Controller.html#head">head</a></li><li data-type='method'><a href="Controller.html#lock">lock</a></li><li data-type='method'><a href="Controller.html#options">options</a></li><li data-type='method'><a href="Controller.html#patch">patch</a></li><li data-type='method'><a href="Controller.html#post">post</a></li><li data-type='method'><a href="Controller.html#purge">purge</a></li><li data-type='method'><a href="Controller.html#put">put</a></li><li data-type='method'><a href="Controller.html#unlock">unlock</a></li></ul></li><li class="accordion collapsed child" id=2678245><div class="accordion-heading child"><a href="Router.html">Router</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="Router.html#add">add</a></li></ul></li><li class="accordion collapsed child" id=6048396><div class="accordion-heading child"><a href="Server.html">Server</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="Server.html#includeDefaultBodyParsers">includeDefaultBodyParsers</a></li><li data-type='method'><a href="Server.html#includeDefaultCompression">includeDefaultCompression</a></li><li data-type='method'><a href="Server.html#includeDefaultCorsHeaders">includeDefaultCorsHeaders</a></li><li data-type='method'><a href="Server.html#includeDefaultSecurityHeaders">includeDefaultSecurityHeaders</a></li><li data-type='method'><a href="Server.html#loadMiddlewares">loadMiddlewares</a></li><li data-type='method'><a href="Server.html#loadRemixFramework">loadRemixFramework</a></li><li data-type='method'><a href="Server.html#loadRouters">loadRouters</a></li><li data-type='method'><a href="Server.html#run">run</a></li></ul></li></ul> </div><div class="accordion collapsed" id="4361325" > <h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#Logger">Logger</a></li></ul> </div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      

      



    









    


    <section class="readme">
        <article><h1>neobeach/core</h1>
<p>Base web framework based on the popular ExpressJS package</p>
<h2>Why?</h2>
<p>The neobeach/core package aims to provide a base webserver application structure based on the popular Express.JS package.
The Core also provides some ready to go implementations for implementing useful and ready-to-go middlewares and frameworks.
We also implement a basic MVC structure that only consists of the Routers and Controllers, after that you are free to either continue your business logic in the Controller or for example go into Services, Repositories, Models or Utils.</p>
<p>The Core is completely modular, this means that we only install the dependencies we really need. As soon as you implement a feature that requires another dependency we just simply ask you to install that within your project.
This keeps the amount of dependencies to a minimum, and the overall package size small. Making it perfect for container architecture</p>
<h2>Project Structure</h2>
<p>Here you will find an example application folder structure, this also explains which files are required:</p>
<pre class="prettyprint source lang-text"><code>example/                 &lt;-- Project Root
  config/                &lt;-- Application config (Required)
    config.json          &lt;-- Environment specific config, normally not stored within GIT (Required)
    default.json         &lt;-- Application specific config, normally stored in GIT (Required)
  controllers/           &lt;-- Contains all application Controllers (Optional, Technically you can store them everywhere but we do recommend creating a folder for it)
    api/                 &lt;-- Contains all Api controllers (Optional)
      IndexController.js &lt;-- Contains all Index/Home handlers for the Api controller (Optional)
    web/                 &lt;-- Contains all Web controllers (Optional)
      IndexController.js &lt;-- Contains all Index/Home handlers for the Web controller (Optional)
  middlewares/           &lt;-- Contains all application Middlewares  (Optional, Technically you can store them everywhere but we do recommend creating a folder for it)
    RequestLogger.js     &lt;-- This file exports a simple Express middleware (Optional)
  routers/               &lt;-- Contains all application Routers (Optional, Technically you can store them everywhere but we do recommend creating a folder for it)
    Api.js               &lt;-- Contains all Api routes and references Controllers to handle a specific sub-path (Optional)
    Web.js               &lt;-- Contains all Web routes and references Controllers to handle a specific sub-path (Optional)
  package.json           &lt;-- Contains all your project dependency information (Required)
  server.js              &lt;-- Main entry file for the application, this initializes the Core and binds for example additional Routers or middlewares (Required)
</code></pre>
<h2>Versions</h2>
<p>The current version of the core is build/tested on the following dependency versions:</p>
<pre class="prettyprint source lang-text"><code>node: &quot;16.14.2&quot;
npm: &quot;8.5.0&quot;

@remix-run/express: &quot;1.3.4&quot;
compression: &quot;1.7.4&quot;
cors: &quot;2.8.5&quot;
deepmerge: &quot;4.2.2&quot;
express: &quot;4.17.3&quot;
helmet: &quot;5.0.2&quot;
js-logger: &quot;1.6.1&quot;
node-fetch: &quot;2.6.7&quot;
</code></pre>
<h2>Config</h2>
<p>Some default application config is already for you defined and can be overridden in your <code>config/default.json</code> or <code>config/config.json</code>:</p>
<pre class="prettyprint source lang-javascript"><code>const dev = process.env.NODE_ENV !== 'production';

const baseConfig = {
    application: {
        env: dev,
        host: '0.0.0.0',
        port: 3000,
        node: 16
    },
    logger: {
        level: 'DEBUG'
    }
};
</code></pre>
<h3>Usage</h3>
<p>Below you will find an example on how to access config elements:</p>
<pre class="prettyprint source lang-javascript"><code>const {Config} = require('@neobeach/core');

console.log('config', config);
console.log('config.application.host', config.application.host);
</code></pre>
<h3>Config Order</h3>
<p>There are multiple config files available for you to use. These are merged in the following order and have a particular role:</p>
<pre class="prettyprint source lang-text"><code>Config.js    &lt;-- Base config provided by the Core.
default.json &lt;-- Lives inside a project and is checked into GIT. This config is therefore available on all environments.
config.json  &lt;-- Lives inside a project and is not checked into GIT. The config is therefore environment specific.
</code></pre>
<h3>Config Location</h3>
<p>The Core will by default expect a <code>config</code> directory from the point where you initialize the application.
Your project layout would then be:</p>
<pre class="prettyprint source lang-text"><code>example/                 &lt;-- Project Root
  config/                &lt;-- Application config (Required)
    config.json          &lt;-- Environment specific config, normally not stored within GIT (Required)
    default.json         &lt;-- Application specific config, normally stored in GIT (Required)
  package.json           &lt;-- Contains all your project dependency information (Required)
  server.js              &lt;-- Main entry file for the application, this initializes the Core and binds for example additional Routers or middlewares (Required)
</code></pre>
<p>In this case your entry point would be the server.js file</p>
<p>However, it may be required to change this. Let's pretend the app is one folder deeper then the entry file.
Your project layout would then be:</p>
<pre class="prettyprint source lang-text"><code>example/                 &lt;-- Project Root
  app/                   &lt;-- App Root
    config/              &lt;-- Application config (Required)
      config.json        &lt;-- Environment specific config, normally not stored within GIT (Required)
      default.json       &lt;-- Application specific config, normally stored in GIT (Required)
  package.json           &lt;-- Contains all your project dependency information (Required)
  server.js              &lt;-- Main entry file for the application, this initializes the Core and binds for example additional Routers or middlewares (Required)
</code></pre>
<p>In this case your entry point would be the server.js file, but the config folder is inside the <code>app/config folder</code></p>
<p>To ensure the application knows about this we can override an environment variable like this:</p>
<pre class="prettyprint source lang-text"><code>CONFIG_DIR=/app/config/
</code></pre>
<h2>Logging</h2>
<p>The Core logger can be imported at any moment. This can be used to output logs to the console.
The following functions will be available to log to the console accordingly to the log level that can be set inside the config:</p>
<pre class="prettyprint source lang-javascript"><code>const {Logger} = require('@neobeach/core');

Logger.trace('This is a message'); // Outputs a log within the trace, debug, info, warn and error log-level with stacktrace
Logger.debug('This is a message'); // Outputs a log within the debug, info, warn and error log-levels
Logger.info('This is a message');  // Outputs a log within the info, warn and error log-levels
Logger.warn('This is a message');  // Outputs a log within the warn and error log-levels
Logger.error('This is a message'); // Outputs a log within the error log-level
</code></pre>
<h3>Log Level</h3>
<p>The application default log level is <code>TRACE</code>, valid options are: <code>TRACE</code>, <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code> and <code>ERROR</code>.
You can change the log level by updating the application config:</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;logger&quot;: {
    &quot;level&quot;: &quot;TRACE&quot;
  }
}
</code></pre>
<h2>Middlewares and Functions</h2>
<p>Below is an overview of all main Server/Core functions:</p>
<pre class="prettyprint source lang-javascript"><code>server.loadMiddlewares(middlewares);    // Load global middlewares into the Express app
server.loadRouters(routers);            // Load routers into the Express app

server.includeDefaultBodyParsers();     // Includes/loads default express body parsers (json, text and urlencoded) with recommended config into the Express app
server.includeDefaultSecurityHeaders(); // Includes/loads default security headers with recommended config into the Express app
server.includeDefaultCorsHeaders();     // Includes/loads default CORS headers with recommended config into the Express app
server.includeDefaultCompression();     // Includes/loads default compression (deflate, gzip) with recommended config into the Express app

server.loadRemixFramework(serverBuild); // Attach a Remix Framework build to our Express server

server.run();                           // Starts the Express server
</code></pre>
<h2>Healthcheck</h2>
<p>On creation of a new Server, every express instance will contain a simple healthcheck.
This healthcheck can be accessed via the <code>/_health</code> url, and reports back some basic application information.
An example of the response can be found here:</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;status&quot;: &quot;UP&quot;,
  &quot;host&quot;: &quot;gHAUVLQsWff7BkRR&quot;,
  &quot;core&quot;: &quot;1.0.0&quot;,
  &quot;load&quot;: {
    &quot;user&quot;: 240214,
    &quot;system&quot;: 60369
  },
  &quot;mem&quot;: {
    &quot;rss&quot;: 45084672,
    &quot;heapTotal&quot;: 19812352,
    &quot;heapUsed&quot;: 10697488,
    &quot;external&quot;: 2473177,
    &quot;arrayBuffers&quot;: 85876
  },
  &quot;uptime&quot;: 1.839386098
}
</code></pre>
<blockquote>
<p>To ensure a fast response time, the healthcheck is initialized before any other middleware. This also keeps the logs free from clutter.</p>
</blockquote>
<h2>Example App</h2>
<h3>server.js</h3>
<p>Below you will find an example server.js:</p>
<pre class="prettyprint source lang-javascript"><code>/**
 * Import modules
 */
const {Runtime, Server} = require('@neobeach/core');
const Api = require('./Api');

/**
 * Setup a new Express server
 */
const server = new Server();

/**
 * Define global middlewares
 */
const globalMiddleware = [
    (req, res, next) => {
        // Execute custom code here
        next();
    }
];

/**
 * Define custom routers
 */
const routers = [
    Api
];

/**
 * Create a runtime/sandbox to start the server in
 */
Runtime(() => {
    server.includeDefaultBodyParsers();
    server.loadMiddlewares(globalMiddleware);
    server.loadRouters(routers);
    server.run();
});
</code></pre>
<h3>Api.js</h3>
<p>Below you will find an example Api.js:</p>
<pre class="prettyprint source lang-javascript"><code>/**
 * Import modules
 */
const {Router} = require('@neobeach/core');
const IndexController = require('./IndexController');

/**
 * Initialize new Router
 */
const router = new Router('Api');

/**
 * Add routes to router
 */
router.add('/api', IndexController);

/**
 * Exports the Api router
 */
module.exports = router;
</code></pre>
<h3>IndexController.js</h3>
<p>Below you will find an example IndexController.js:</p>
<pre class="prettyprint source lang-javascript"><code>/**
 * Import modules
 */
const {Controller} = require('@neobeach/core');

/**
 * Initialize new Controller
 */
const controller = new Controller('IndexController');

/**
 * Add routes to controller
 */
controller.get('/', [], (req, res) => {
    res.json(1000, {
        hello: 'world!'
    });
});

/**
 * Exports the IndexController
 */
module.exports = controller;
</code></pre>
<h2>License</h2>
<p>MIT</p></article>
    </section>






    </div>

    <footer class="footer" id="footer">
      
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"Config","link":"<a href=\"module-Config.html\">Config</a>"},{"title":"Logger","link":"<a href=\"module-Logger.html\">Logger</a>"},{"title":"Runtime","link":"<a href=\"module-Runtime.html\">Runtime</a>"},{"title":"Controller","link":"<a href=\"Controller.html\">Controller</a>"},{"title":"Controller#copy","link":"<a href=\"Controller.html#copy\">Controller &rtrif; copy</a>"},{"title":"Controller#delete","link":"<a href=\"Controller.html#delete\">Controller &rtrif; delete</a>"},{"title":"Controller#get","link":"<a href=\"Controller.html#get\">Controller &rtrif; get</a>"},{"title":"Controller#head","link":"<a href=\"Controller.html#head\">Controller &rtrif; head</a>"},{"title":"Controller#lock","link":"<a href=\"Controller.html#lock\">Controller &rtrif; lock</a>"},{"title":"Controller#options","link":"<a href=\"Controller.html#options\">Controller &rtrif; options</a>"},{"title":"Controller#patch","link":"<a href=\"Controller.html#patch\">Controller &rtrif; patch</a>"},{"title":"Controller#post","link":"<a href=\"Controller.html#post\">Controller &rtrif; post</a>"},{"title":"Controller#purge","link":"<a href=\"Controller.html#purge\">Controller &rtrif; purge</a>"},{"title":"Controller#put","link":"<a href=\"Controller.html#put\">Controller &rtrif; put</a>"},{"title":"Controller#unlock","link":"<a href=\"Controller.html#unlock\">Controller &rtrif; unlock</a>"},{"title":"Router","link":"<a href=\"Router.html\">Router</a>"},{"title":"Router#add","link":"<a href=\"Router.html#add\">Router &rtrif; add</a>"},{"title":"Server","link":"<a href=\"Server.html\">Server</a>"},{"title":"Server#includeDefaultBodyParsers","link":"<a href=\"Server.html#includeDefaultBodyParsers\">Server &rtrif; includeDefaultBodyParsers</a>"},{"title":"Server#includeDefaultCompression","link":"<a href=\"Server.html#includeDefaultCompression\">Server &rtrif; includeDefaultCompression</a>"},{"title":"Server#includeDefaultCorsHeaders","link":"<a href=\"Server.html#includeDefaultCorsHeaders\">Server &rtrif; includeDefaultCorsHeaders</a>"},{"title":"Server#includeDefaultSecurityHeaders","link":"<a href=\"Server.html#includeDefaultSecurityHeaders\">Server &rtrif; includeDefaultSecurityHeaders</a>"},{"title":"Server#loadMiddlewares","link":"<a href=\"Server.html#loadMiddlewares\">Server &rtrif; loadMiddlewares</a>"},{"title":"Server#loadRemixFramework","link":"<a href=\"Server.html#loadRemixFramework\">Server &rtrif; loadRemixFramework</a>"},{"title":"Server#loadRouters","link":"<a href=\"Server.html#loadRouters\">Server &rtrif; loadRouters</a>"},{"title":"Server#run","link":"<a href=\"Server.html#run\">Server &rtrif; run</a>"},{"title":"Logger","link":"<a href=\"global.html#Logger\">Logger</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    

    


  </body>

</html>