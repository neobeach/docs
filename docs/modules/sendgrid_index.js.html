<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding favicon -->
    

    <!-- Adding meta -->
    
    
    <meta name="author" content="Glenn de Haan" />
    
    <meta name="description" content="A collection of middlewares that can be used in combination with the @neobeach/core package" />
    
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      sendgrid/index.js
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">Modules</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><ul><li class="menu-li"><a href='https://github.com/neobeach/core' class=' menu-link' id='' target='_blank'>@neobeach/core - GitHub</a></li><li class="menu-li"><a href='https://npmjs.com/@neobeach/core' class=' menu-link' id='' target='_blank'>@neobeach/core - NPM</a></li><li class="menu-li"><a href='https://neobeach.dev/core/' class=' menu-link' id='' target=''>Core - Documentation</a></li><li class="menu-li"><a href='https://neobeach.dev/middlewares/' class=' menu-link' id='' target=''>Middlewares - Documentation</a></li><li class="menu-li"><a href='https://neobeach.dev/modules/' class=' menu-link' id='' target=''>Modules - Documentation</a></li></ul><div class="accordion collapsed" id="1028534" > <h3 class="accordion-heading">Modules<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id=9145395><div class="accordion-heading child"><a href="module-@neobeach_modules-graylog.html">@neobeach/modules-graylog</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="module-@neobeach_modules-graylog.html#.init">init</a></li><li data-type='method'><a href="module-@neobeach_modules-graylog.html#.send">send</a></li></ul></li><li class="accordion collapsed child" id=8835584><div class="accordion-heading child"><a href="module-@neobeach_modules-sendgrid.html">@neobeach/modules-sendgrid</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="module-@neobeach_modules-sendgrid.html#.init">init</a></li><li data-type='method'><a href="module-@neobeach_modules-sendgrid.html#.send">send</a></li></ul></li></ul> </div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      
      <h1 id='page-title' class="page-title">
        sendgrid/index.js
      </h1>
      

      



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Import modules
 * @ignore
 */
const {Logger} = require('@neobeach/core');
const sendGrid = require('@sendgrid/mail');

/**
 * Setting variables
 * @ignore
 */
const config = {};

/**
 * A module to simplify the connection to sendgrid for sending mail
 *
 * @module @neobeach/modules-sendgrid
 * @type {{init: (function(String, String): undefined), send: (function((Array&lt;string>|String), String, String, String, String=, (Array&lt;string>|String)=, (Array&lt;string>|String)=, Array=): *)}}
 */
module.exports = {
    /**
     * Initialize the Sendgrid module
     *
     * @access public
     * @since 1.0.0
     * @author Roel Voordendag
     * @copyright MIT
     *
     * @see https://www.npmjs.com/package/@sendgrid/mail
     * @see https://docs.sendgrid.com/api-reference/mail-send/mail-send
     *
     * @param {String} apiKey - Api key from sendgrid.
     * @param {String} from - Standard from email address that will be used also as standard replyTo.
     *
     * @example
     * const {Runtime, Server} = require('@neobeach/core');
     * const sendgrid = require('@neobeach/modules-sendgrid')
     *
     * const server = new Server();
     *
     * Runtime(() => {
     *    sendgrid.init(sendgridApiKey, 'noreply@dpdk.com');
     *    server.run();
     * });
     *
     */
    init: (apiKey, from) => {
        /**
         * Checking if apiKey is correct
         */
        if(typeof apiKey === "undefined" || typeof apiKey !== "string" || apiKey === ""){
            Logger.error("[SENDGRID] apiKey is not correct");
            process.exit(1);
            return;
        }

        /**
         * Checking if from is correct
         */
        if(typeof from === "undefined" || typeof from !== "string" || from === "") {
            Logger.error("[SENDGRID] from is not correct")
            process.exit(1);
            return;
        }

        config.apiKey = apiKey;
        config.from = from;
        sendGrid.setApiKey(config.apiKey);

        Logger.info('[SENDGRID] Initialized');
    },

    /**
     * Helper function to send email with Sendgrid.
     *
     * @access public
     * @since 1.0.0
     * @author Roel Voordendag
     * @copyright MIT
     *
     * @see https://www.npmjs.com/package/@sendgrid/mail
     * @see https://docs.sendgrid.com/api-reference/mail-send/mail-send
     *
     * @param {Array&lt;string>|String} to - String with email to send to or an array filled with email addresses the email will be sent to.
     * @param {String} subject - Subject of the email.
     * @param {String} text - Text of the body of the mail.
     * @param {String} html - Body of email in html.
     * @param {String} replyTo - Email address where replies to send email will be sent to (default from email).
     * @param {Array&lt;string>|String} cc - String with email to send to or an array filled with email addresses the email will be sent to.
     * @param {Array&lt;string>|String} bcc - String with email to send to or an array filled with email addresses the email hidden will be sent to.
     * @param {Array} attachments - Array filled with needed object attachments information.
     *
     * @return {Promise}
     *
     * @example
     * const sendGrid = require('@neobeach/modules-sendgrid');
     *
     * const response = await sendGrid.send({
     *    to: 'user@example.com',
     *    subject: 'Testing mail',
     *    text: 'This is a testing mail',
     *    html: '&lt;p>This is a testing mail&lt;/p>',
     *    replyTo: 'replyToUser@example.com',
     *    cc: 'anotheruser@example.com',
     *    bcc: 'hiddenuser@example.com,
     *    attachments: []
     *  }}
     */
    send: (to, subject, text, html, replyTo = config.from, cc = '', bcc = '', attachments = []) => {
        /**
         * Check if to is correct
         */
        if(typeof to === "undefined" || (typeof to !== "string" &amp;&amp; !Array.isArray(to))){
            Logger.error('[SENDGRID] to is not correct!');
            process.exit(1);
            return;
        }

        /**
         * Check if subject is correct
         */
        if(typeof subject === "undefined" || typeof subject !== "string" || subject === ""){
            Logger.error('[SENDGRID] subject is not correct');
            process.exit(1);
            return;
        }

        /**
         * Check if html is correct
         */
        if(typeof html === "undefined" || typeof html !== "string" || html === "") {
            Logger.error('[SENDGRID] html is not correct');
            process.exit(1);
            return;
        }

        /**
         * Check if text is correct
         */
        if(typeof text === "undefined" || typeof text !== "string" || text === "") {
            Logger.error('[SENDGRID] text is not correct');
            process.exit(1);
            return;
        }

        return sendGrid.send({
            to: to,
            from: config.from,
            replyTo: replyTo,
            subject: subject,
            text: text,
            html: html,
            cc: cc,
            bcc: bcc,
            attachments: attachments
        })
    }
}
</code></pre>
        </article>
    </section>




    </div>

    <footer class="footer" id="footer">
      
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"@neobeach/modules-graylog","link":"<a href=\"module-@neobeach_modules-graylog.html\">@neobeach/modules-graylog</a>"},{"title":"module:@neobeach/modules-graylog.init","link":"<a href=\"module-@neobeach_modules-graylog.html#.init\">module:@neobeach/modules-graylog &rtrif; init</a>"},{"title":"module:@neobeach/modules-graylog.send","link":"<a href=\"module-@neobeach_modules-graylog.html#.send\">module:@neobeach/modules-graylog &rtrif; send</a>"},{"title":"@neobeach/modules-sendgrid","link":"<a href=\"module-@neobeach_modules-sendgrid.html\">@neobeach/modules-sendgrid</a>"},{"title":"module:@neobeach/modules-sendgrid.init","link":"<a href=\"module-@neobeach_modules-sendgrid.html#.init\">module:@neobeach/modules-sendgrid &rtrif; init</a>"},{"title":"module:@neobeach/modules-sendgrid.send","link":"<a href=\"module-@neobeach_modules-sendgrid.html#.send\">module:@neobeach/modules-sendgrid &rtrif; send</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    

    


  </body>

</html>
